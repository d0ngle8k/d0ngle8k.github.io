---
import Base from '../layouts/Base.astro';
import { Starfield } from '../components/Starfield';
import { posts } from '../data/posts';
import { projects } from '../data/projects';

const recentPosts = posts.slice(0, 3);
const recentProjects = projects.slice(0, 3);
---
<Base title="Truong Gia Thanh | Portfolio">
  <section class="relative isolate overflow-hidden" id="top">
    <div class="absolute inset-0">
      <Starfield client:load />
    </div>
    <div class="relative mx-auto flex min-h-[60vh] sm:min-h-[70vh] max-w-4xl flex-col items-center justify-center gap-4 sm:gap-6 px-4 sm:px-6 text-center">
      <p class="text-secondary text-xs sm:text-sm uppercase tracking-[0.3em]">Hello, I am â€¦</p>
      <h1 class="text-2xl sm:text-4xl md:text-5xl font-extrabold tracking-tight leading-tight">TRUONG GIA THANH</h1>
      <p class="text-secondary max-w-xl text-sm sm:text-base">
        Cyber security specialist building secure systems and protecting digital infrastructure.
        I analyze threats, implement defenses, and keep systems resilient.
      </p>
      <div class="flex flex-wrap items-center justify-center gap-2 sm:gap-3">
        <a class="btn-primary text-xs sm:text-sm px-4 sm:px-6 py-2 sm:py-2.5" href="/blog">Read my blog</a>
        <a class="btn-ghost text-xs sm:text-sm px-4 sm:px-6 py-2 sm:py-2.5" href="/work">View my work</a>
      </div>
    </div>
  </section>

  <section class="mx-auto max-w-5xl px-4 sm:px-6 py-12 sm:py-16 space-y-6">
    <div class="card p-4 sm:p-6 space-y-4 text-center">
      <h2 class="text-lg sm:text-xl font-semibold">About Me</h2>
      <p class="text-secondary text-sm sm:text-base">
        Esport Game Enjoyer and Cybersecurity Researcher. I don't code like a bot, I find real problems to solve.
      </p>
    </div>
  </section>

  <section class="mx-auto max-w-5xl px-4 sm:px-6 pb-12 sm:pb-16 space-y-8">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
      <h2 class="text-lg sm:text-xl font-semibold">Recent posts</h2>
      <a class="text-xs sm:text-sm text-secondary hover:text-white transition-colors" href="/blog">View all</a>
    </div>
    <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3">
      {recentPosts.map((post) => (
          <a href={`/blog/${post.slug}`} class="block transition-transform hover:scale-105">
          <article class="card p-3 sm:p-4 space-y-2 h-full cursor-pointer">
            <div class="text-xs text-secondary">{new Date(post.date).toDateString()}</div>
            <h3 class="font-semibold text-sm sm:text-lg line-clamp-2">{post.title}</h3>
            <p class="text-secondary text-xs sm:text-sm line-clamp-2">{post.excerpt}</p>
            <div class="flex flex-wrap gap-1 sm:gap-2 text-[10px] sm:text-[11px] text-secondary">
                {post.tags.map((tag) => (
                  <span class="rounded-full border border-white/10 bg-white/5 px-2 py-0.5 sm:py-1">{tag}</span>
                ))}
            </div>
          </article>
        </a>
      ))}
    </div>
  </section>

  <section class="mx-auto max-w-5xl px-4 sm:px-6 pb-16 sm:pb-20 space-y-8">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
      <h2 class="text-lg sm:text-xl font-semibold">Projects</h2>
      <a class="text-xs sm:text-sm text-secondary hover:text-white transition-colors" href="/projects">View all</a>
    </div>
    <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3">
      {recentProjects.map((project) => (
          <a href={`/projects/${project.slug}`} class="block transition-transform hover:scale-105">
          <article class="card p-3 sm:p-4 space-y-2 h-full cursor-pointer">
            <div class="text-xs text-secondary">{new Date(project.date).toDateString()}</div>
            <h3 class="font-semibold text-sm sm:text-lg line-clamp-2">{project.title}</h3>
            <p class="text-secondary text-xs sm:text-sm line-clamp-2">{project.summary}</p>
            <div class="flex flex-wrap gap-1 sm:gap-2 text-[10px] sm:text-[11px] text-secondary">
                {project.tags.map((tag) => (
                  <span class="rounded-full border border-white/10 bg-white/5 px-2 py-0.5 sm:py-1">{tag}</span>
                ))}
            </div>
          </article>
        </a>
      ))}
    </div>
  </section>
</Base>
