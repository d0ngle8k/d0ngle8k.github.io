import{j as T}from"./jsx-runtime.ClP7wGfN.js";import{r as R}from"./index.DK-fsZOb.js";const E=120;function $(g,e){return{x:Math.random()*g,y:Math.random()*e,z:Math.random()*g}}function F(){const g=R.useRef(null);return R.useEffect(()=>{const e=g.current;if(!e)return;const a=e.getContext("2d");if(!a)return;let S,b=Array.from({length:E},()=>$(e.width,e.height)),f=[],m=[],x=performance.now(),M=300+Math.random()*600,p=5e3+Math.random()*3e3;const u=()=>{e.width=window.innerWidth,e.height=window.innerHeight,b=Array.from({length:E},()=>$(e.width,e.height)),f=[],m=[],M=300+Math.random()*600,p=5e3+Math.random()*3e3,x=performance.now()},L=()=>{f.push({x:Math.random()*e.width,y:Math.random()*e.height,age:0,life:900+Math.random()*800,maxR:1.5+Math.random()*2.5})},k=()=>{const o=Math.random();let i,n,t;o<.25?(i=-80,n=Math.random()*(e.height*.4),t=(30+Math.random()*30)*(Math.PI/180)):o<.5?(i=e.width+80,n=Math.random()*(e.height*.4),t=(150+Math.random()*30)*(Math.PI/180)):o<.75?(i=Math.random()*(e.width*.4),n=e.height+80,t=(-60+Math.random()*30)*(Math.PI/180)):(i=e.width+80,n=e.height+80,t=(210+Math.random()*30)*(Math.PI/180));const h=350+Math.random()*250,s=Math.cos(t)*h,r=Math.sin(t)*h;m.push({x:i,y:n,vx:s,vy:r,age:0,life:1600+Math.random()*1200,tail:90+Math.random()*80})},v=()=>{const w=performance.now(),o=w-x;x=w;const i=document.documentElement.classList.contains("light");if(a.fillStyle=i?"#ffffff":"#000000",a.fillRect(0,0,e.width,e.height),!i){a.fillStyle="rgba(255,255,255,0.9)",b.forEach(n=>{const t=.5+Math.random()*.5;a.fillStyle=`rgba(255,255,255,${t})`,a.beginPath(),a.arc(n.x,n.y,1+Math.random()*1.2,0,Math.PI*2),a.fill(),n.y+=.05,n.y>e.height&&(n.y=0)}),M-=o,M<=0&&(L(),M=300+Math.random()*600),p-=o,p<=0&&m.length<50&&(k(),p=1e3);for(let n=f.length-1;n>=0;n--){const t=f[n];t.age+=o;const h=Math.min(1,t.age/t.life),s=.3+Math.sin(h*Math.PI*8)*.35+(1-Math.abs(.5-h)*2)*.35,r=.5+s*t.maxR,l=.4+s*.6,d=a.createRadialGradient(t.x,t.y,0,t.x,t.y,r*5);d.addColorStop(0,`rgba(255,255,255,${l*.5})`),d.addColorStop(.5,`rgba(255,255,255,${l*.15})`),d.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=d,a.beginPath(),a.arc(t.x,t.y,r*5,0,Math.PI*2),a.fill();const c=a.createRadialGradient(t.x,t.y,0,t.x,t.y,r*2);c.addColorStop(0,`rgba(255,255,255,${l})`),c.addColorStop(.5,`rgba(255,255,255,${l*.4})`),c.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=c,a.beginPath(),a.arc(t.x,t.y,r*2,0,Math.PI*2),a.fill(),t.age>=t.life&&f.splice(n,1)}for(let n=m.length-1;n>=0;n--){const t=m[n];t.age+=o;const h=o/1e3;t.x+=t.vx*h,t.y+=t.vy*h;const s=Math.min(1,t.age/t.life),r=(1-s)*.9,l=t.tail*(1-s*.4),d=t.vx,c=t.vy,C=Math.hypot(d,c)||1,A=d/C*l,G=c/C*l,P=t.x-A,I=t.y-G,y=a.createLinearGradient(P,I,t.x,t.y);y.addColorStop(0,"rgba(255,255,255,0)"),y.addColorStop(.6,`rgba(255,255,255,${r*.35})`),y.addColorStop(1,`rgba(255,255,255,${r})`),a.save(),a.strokeStyle=y,a.lineWidth=2,a.lineCap="round",a.shadowColor="rgba(255,255,255,0.9)",a.shadowBlur=10,a.beginPath(),a.moveTo(P,I),a.lineTo(t.x,t.y),a.stroke(),a.restore(),(t.age>=t.life||t.x>e.width+120||t.y>e.height+120)&&m.splice(n,1)}}S=requestAnimationFrame(v)};return u(),window.addEventListener("resize",u),v(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(S)}},[]),T.jsx("canvas",{ref:g,className:"absolute inset-0 h-full w-full transition-opacity duration-500 pointer-events-none","aria-hidden":!0})}export{F as Starfield};
