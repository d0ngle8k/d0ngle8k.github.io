import{j as T}from"./jsx-runtime.ClP7wGfN.js";import{r as E}from"./index.DK-fsZOb.js";const I=120;function $(c,e){return{x:Math.random()*c,y:Math.random()*e,z:Math.random()*c}}function F(){const c=E.useRef(null);return E.useEffect(()=>{const e=c.current;if(!e)return;const a=e.getContext("2d");if(!a)return;let S,b=Array.from({length:I},()=>$(e.width,e.height)),m=[],d=[],u=performance.now(),M=300+Math.random()*600,p=5e3+Math.random()*3e3;const w=()=>{e.width=window.innerWidth,e.height=window.innerHeight,b=Array.from({length:I},()=>$(e.width,e.height)),m=[],d=[],M=300+Math.random()*600,p=5e3+Math.random()*3e3,u=performance.now()},L=()=>{m.push({x:Math.random()*e.width,y:Math.random()*e.height,age:0,life:900+Math.random()*800,maxR:1.5+Math.random()*2.5})},k=()=>{const y=Math.random()<.5?-80:Math.random()*(e.width*.35),o=Math.random()*(e.height*.3),f=350+Math.random()*250,n=(35+Math.random()*20)*(Math.PI/180),t=Math.cos(n)*f,r=Math.sin(n)*f;d.push({x:y,y:o,vx:t,vy:r,age:0,life:1600+Math.random()*1200,tail:90+Math.random()*80})},v=()=>{const y=performance.now(),o=y-u;u=y;const f=document.documentElement.classList.contains("light");if(a.fillStyle=f?"#ffffff":"#000000",a.fillRect(0,0,e.width,e.height),!f){a.fillStyle="rgba(255,255,255,0.9)",b.forEach(n=>{const t=.5+Math.random()*.5;a.fillStyle=`rgba(255,255,255,${t})`,a.beginPath(),a.arc(n.x,n.y,1+Math.random()*1.2,0,Math.PI*2),a.fill(),n.y+=.05,n.y>e.height&&(n.y=0)}),M-=o,M<=0&&(L(),M=300+Math.random()*600),p-=o,p<=0&&d.length<1&&(k(),p=5e3+Math.random()*3e3);for(let n=m.length-1;n>=0;n--){const t=m[n];t.age+=o;const r=Math.min(1,t.age/t.life),g=.3+Math.sin(r*Math.PI*8)*.35+(1-Math.abs(.5-r)*2)*.35,i=.5+g*t.maxR,s=.4+g*.6,l=a.createRadialGradient(t.x,t.y,0,t.x,t.y,i*5);l.addColorStop(0,`rgba(255,255,255,${s*.5})`),l.addColorStop(.5,`rgba(255,255,255,${s*.15})`),l.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=l,a.beginPath(),a.arc(t.x,t.y,i*5,0,Math.PI*2),a.fill();const h=a.createRadialGradient(t.x,t.y,0,t.x,t.y,i*2);h.addColorStop(0,`rgba(255,255,255,${s})`),h.addColorStop(.5,`rgba(255,255,255,${s*.4})`),h.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=h,a.beginPath(),a.arc(t.x,t.y,i*2,0,Math.PI*2),a.fill(),t.age>=t.life&&m.splice(n,1)}for(let n=d.length-1;n>=0;n--){const t=d[n];t.age+=o;const r=o/1e3;t.x+=t.vx*r,t.y+=t.vy*r;const g=Math.min(1,t.age/t.life),i=(1-g)*.9,s=t.tail*(1-g*.4),l=t.vx,h=t.vy,C=Math.hypot(l,h)||1,A=l/C*s,G=h/C*s,P=t.x-A,R=t.y-G,x=a.createLinearGradient(P,R,t.x,t.y);x.addColorStop(0,"rgba(255,255,255,0)"),x.addColorStop(.6,`rgba(255,255,255,${i*.35})`),x.addColorStop(1,`rgba(255,255,255,${i})`),a.save(),a.strokeStyle=x,a.lineWidth=2,a.lineCap="round",a.shadowColor="rgba(255,255,255,0.9)",a.shadowBlur=10,a.beginPath(),a.moveTo(P,R),a.lineTo(t.x,t.y),a.stroke(),a.restore(),(t.age>=t.life||t.x>e.width+120||t.y>e.height+120)&&d.splice(n,1)}}S=requestAnimationFrame(v)};return w(),window.addEventListener("resize",w),v(),()=>{window.removeEventListener("resize",w),cancelAnimationFrame(S)}},[]),T.jsx("canvas",{ref:c,className:"absolute inset-0 h-full w-full transition-opacity duration-500 pointer-events-none","aria-hidden":!0})}export{F as Starfield};
