import{j as A}from"./jsx-runtime.ClP7wGfN.js";import{r as I}from"./index.DK-fsZOb.js";const R=120;function E(g,e){return{x:Math.random()*g,y:Math.random()*e,z:Math.random()*g}}function z(){const g=I.useRef(null);return I.useEffect(()=>{const e=g.current;if(!e)return;const a=e.getContext("2d");if(!a)return;let S,b=Array.from({length:R},()=>E(e.width,e.height)),f=[],c=[],x=performance.now(),M=300+Math.random()*600,p=5e3+Math.random()*3e3;const u=()=>{e.width=window.innerWidth,e.height=window.innerHeight,b=Array.from({length:R},()=>E(e.width,e.height)),f=[],c=[],M=300+Math.random()*600,p=5e3+Math.random()*3e3,x=performance.now()},$=()=>{f.push({x:Math.random()*e.width,y:Math.random()*e.height,age:0,life:900+Math.random()*800,maxR:1.5+Math.random()*2.5})},L=()=>{const o=Math.random();let h,n,t;o<.25?(h=-80,n=Math.random()*(e.height*.4),t=(30+Math.random()*30)*(Math.PI/180)):o<.5?(h=e.width+80,n=Math.random()*(e.height*.4),t=(150+Math.random()*30)*(Math.PI/180)):o<.75?(h=Math.random()*(e.width*.4),n=e.height+80,t=(-60+Math.random()*30)*(Math.PI/180)):(h=e.width+80,n=e.height+80,t=(210+Math.random()*30)*(Math.PI/180));const i=350+Math.random()*250,l=Math.cos(t)*i,r=Math.sin(t)*i;c.push({x:h,y:n,vx:l,vy:r,age:0,life:1600+Math.random()*1200,tail:90+Math.random()*80})},v=()=>{const w=performance.now(),o=w-x;x=w;const h=document.documentElement.classList.contains("light");if(a.clearRect(0,0,e.width,e.height),!h){a.fillStyle="#000000",a.fillRect(0,0,e.width,e.height),a.fillStyle="rgba(255,255,255,0.9)",b.forEach(n=>{const t=.5+Math.random()*.5;a.fillStyle=`rgba(255,255,255,${t})`,a.beginPath(),a.arc(n.x,n.y,1+Math.random()*1.2,0,Math.PI*2),a.fill(),n.y+=.05,n.y>e.height&&(n.y=0)}),M-=o,M<=0&&($(),M=300+Math.random()*600),p-=o,p<=0&&c.length<50&&(L(),p=1e3);for(let n=f.length-1;n>=0;n--){const t=f[n];t.age+=o;const i=Math.min(1,t.age/t.life),l=.3+Math.sin(i*Math.PI*8)*.35+(1-Math.abs(.5-i)*2)*.35,r=.5+l*t.maxR,s=.4+l*.6,d=a.createRadialGradient(t.x,t.y,0,t.x,t.y,r*5);d.addColorStop(0,`rgba(255,255,255,${s*.5})`),d.addColorStop(.5,`rgba(255,255,255,${s*.15})`),d.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=d,a.beginPath(),a.arc(t.x,t.y,r*5,0,Math.PI*2),a.fill();const m=a.createRadialGradient(t.x,t.y,0,t.x,t.y,r*2);m.addColorStop(0,`rgba(255,255,255,${s})`),m.addColorStop(.5,`rgba(255,255,255,${s*.4})`),m.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=m,a.beginPath(),a.arc(t.x,t.y,r*2,0,Math.PI*2),a.fill(),t.age>=t.life&&f.splice(n,1)}for(let n=c.length-1;n>=0;n--){const t=c[n];t.age+=o;const i=o/1e3;t.x+=t.vx*i,t.y+=t.vy*i;const l=Math.min(1,t.age/t.life),r=(1-l)*.9,s=t.tail*(1-l*.4),d=Math.hypot(t.vx,t.vy)||1,m=t.vx/d*s,k=t.vy/d*s,C=t.x-m,P=t.y-k,y=a.createLinearGradient(C,P,t.x,t.y);y.addColorStop(0,"rgba(255,255,255,0)"),y.addColorStop(.6,`rgba(255,255,255,${r*.35})`),y.addColorStop(1,`rgba(255,255,255,${r})`),a.save(),a.strokeStyle=y,a.lineWidth=2,a.lineCap="round",a.shadowColor="rgba(255,255,255,0.9)",a.shadowBlur=10,a.beginPath(),a.moveTo(C,P),a.lineTo(t.x,t.y),a.stroke(),a.restore(),(t.age>=t.life||t.x>e.width+120||t.y>e.height+120)&&c.splice(n,1)}}S=requestAnimationFrame(v)};return u(),window.addEventListener("resize",u),v(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(S)}},[]),A.jsx("canvas",{ref:g,className:"absolute inset-0 h-full w-full transition-opacity duration-500 pointer-events-none","aria-hidden":!0})}export{z as Starfield};
